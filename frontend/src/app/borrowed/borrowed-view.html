<!-- search -->
<div class="container pt-2">
  <form class="row g-2 py-3">
    <div class="col">
      <input
        id="searchGame"
        class="form-control"
        name="searchGame"
        placeholder="Game name"
        [(ngModel)]="searchGame"
      />
    </div>
    <div class="col">
      <input
        is="searchPerson"
        name="searchPerson"
        class="form-control"
        placeholder="Person who borrowed the game "
        [(ngModel)]="searchPerson"
      />
    </div>
  </form>
  <!-- list of borrowed games -->
  <table class="table table-striped table-hover table-hover-custom align-middle">
    <thead class="table-light">
      <tr>
        <th style="width: 7%">Copy#</th>
        <th style="width: 15%">Game</th>
        <th style="width: 20%">Responsible person</th>
        <th style="width: 45%">Comment</th>
        <th style="width: 6%">Weight</th>
        <th style="width: 8%"></th>
      </tr>
    </thead>
    <tbody>
      @for (copy of filteredCopies; track copy.id) {
      <tr>
        <th>{{ copy.id }}</th>
        <td>{{ gameNameById(copy.gameId) }}</td>
        <td>{{ copy.responsiblePerson }}</td>
        <td>{{ copy.comment }}</td>
        <td>{{ copy.weight }}</td>
        <td class="text-nowrap">
          <button
            type="button"
            class="btn btn-outline-secondary btn-icon me-1"
            (click)="onEditBorrowedGame(copy.id)"
          >
            <i class="bi bi-pencil"></i>
          </button>
          <button
            type="button"
            class="btn btn-outline-secondary btn-icon"
            (click)="returnBorrowedGame(copy.id)"
          >
            <i class="bi bi-box-arrow-in-down"></i>
          </button>
        </td>
      </tr>
      }
    </tbody>
  </table>

  <!-- Borrow game button -->
  <button class="borrow-game-button rounded-circle" (click)="onStartBorrowingGame()">
    <i class="bi bi-plus-lg"></i>
  </button>

  <!-- Borrowing game window -->
  @if (isBorrowingGame){
  <borrowed-add (close)="onCloseBorrowingGame()"></borrowed-add>
  }
  <!-- Edit borrowed game record -->
  @if (isEditingGame){
  <borrowed-edit (close)="onCloseEditBorrowedGame()" [copyId]="editingCopyId"></borrowed-edit>
  }
</div>
